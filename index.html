<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Mavi Banner â€” Guardian Universe Alpha ğŸ’™</title>
<style>
  :root{
    --ui-bg:#0b1020; --ui-fg:#dfe7ff; --glow:#4da6ff; --accent:#7ec3ff;
    --orb-core:#4da6ff; --orb-edge:#002255;
    --bubble-user:#1a2a55aa; --bubble-ai:#0f1b3faa; --stroke:#6aa8ff33;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 600px at 50% -20%,
      #0d1638 0%, #0a1130 40%, #070b1f 70%, #040714 100%);
    color:var(--ui-fg); font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    overflow:hidden;
    -webkit-tap-highlight-color: transparent;
  }

  /* HUD */
  .hud{
    position:fixed; top:12px; left:50%; transform:translateX(-50%);
    display:flex; gap:8px; padding:8px 10px; border-radius:14px;
    background:rgba(10,14,30,.55); backdrop-filter: blur(6px);
    box-shadow:0 6px 20px rgba(0,0,0,.35), inset 0 0 0 1px rgba(100,150,255,.18);
    z-index:5; user-select:none
  }
  .btn{
    padding:8px 12px; border-radius:10px; border:1px solid rgba(120,160,255,.25);
    color:var(--ui-fg); background:linear-gradient(180deg, rgba(18,25,55,.75), rgba(10,15,30,.75));
    cursor:pointer; font-weight:600; letter-spacing:.2px; transition:.15s transform,.2s box-shadow;
  }
  .btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(77,166,255,.22)}
  .badge{ padding:8px 10px; border-radius:10px; background:rgba(77,166,255,.15); border:1px solid rgba(77,166,255,.35)}
  .sep{width:1px;background:linear-gradient(180deg,transparent,rgba(255,255,255,.15),transparent)}

  /* Canvas full-screen */
  canvas{position:fixed; inset:0; display:block}

  /* Chat zone (new integration) */
  #app{
    position:fixed; left:12px; right:12px;
    bottom:0;
    display:flex; flex-direction:column; gap:10px;
    padding:10px; padding-bottom: calc(12px + env(safe-area-inset-bottom));
    background: linear-gradient(0deg, rgba(4,7,20,.95) 0%, rgba(4,7,20,.65) 60%, transparent 100%);
    backdrop-filter: blur(8px);
    z-index:5;
  }
  #chat-container{
    flex:1 1 auto;
    max-height:55vh;
    overflow-y:auto;
    padding:12px;
    display:flex; flex-direction:column; gap:8px;
    border-radius:14px;
    background:rgba(12,18,40,.55);
    border:1px solid rgba(120,160,255,.28);
    box-shadow:0 6px 20px rgba(0,0,0,.25);
    scrollbar-width:thin;
  }
  #chat-container::-webkit-scrollbar{width:8px}
  #chat-container::-webkit-scrollbar-thumb{background:rgba(110,150,255,.25); border-radius:20px}
  #input-area{
    flex:0 0 auto;
    display:flex; align-items:center; gap:10px;
    padding:12px; border-radius:14px;
    background:rgba(12,18,40,.65);
    border:1px solid rgba(120,160,255,.35);
    box-shadow:0 8px 20px rgba(0,0,0,.35);
  }
  #user-input{
    flex:1; background:transparent; border:0; outline:0; color:#e8f2ff; font-size:15px;
  }
  #send-btn{
    padding:10px 18px; border-radius:12px; border:1px solid rgba(120,160,255,.35);
    font-weight:700; color:#e8f2ff; background:linear-gradient(180deg,#243463,#152042);
    cursor:pointer; transition:.15s transform,.2s box-shadow;
  }
  #send-btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(77,166,255,.22)}
  #send-btn:disabled{ opacity:.6; cursor:default; transform:none; box-shadow:none }

  /* Message bubbles */
  .bubble{
    max-width:86%; padding:10px 14px;
    border-radius:14px; line-height:1.4; font-size:14.5px;
    box-shadow:0 6px 18px rgba(0,0,0,.28);
    opacity:0; transform:translateY(10px);
    transition:opacity .25s ease-out, transform .25s ease-out;
  }
  .bubble.show{opacity:1; transform:translateY(0)}
  .bubble.user{
    align-self:flex-end;
    background:rgba(74,144,226,.85);
    color:#fff;
    border-bottom-right-radius:4px;
    transform:translateX(16px);
  }
  .bubble.user.show{transform:translateX(0)}
  .bubble.bot{
    align-self:flex-start;
    background:rgba(15,27,63,.82);
    border:1px solid rgba(106,168,255,.35);
    color:#e2ecff;
    border-bottom-left-radius:4px;
    transform:translateX(-16px);
  }
  .bubble.bot.show{transform:translateX(0)}

  /* Ä°puÃ§larÄ± */
  .pill{
    position:fixed; left:12px; right:12px;
    bottom: calc(110px + env(safe-area-inset-bottom));
    display:flex; gap:10px; flex-wrap:wrap; color:#cfe3ff; font-size:12.5px; line-height:1.4; z-index:4; opacity:.9
  }
  .tip{ padding:8px 10px; border-radius:10px; background:rgba(10,18,40,.55); border:1px dashed rgba(120,160,255,.3)}
  
  /* Tema seÃ§ici paneli */
  .panel{
    position:fixed; right:12px; top:60px; width:220px; padding:12px; border-radius:14px;
    background:rgba(10,14,30,.6); backdrop-filter:blur(6px);
    border:1px solid rgba(120,160,255,.2); color:#e8f2ff; z-index:6; display:none; gap:8px;
  }
  .panel h3{margin:0 0 8px 0; font-size:14px; opacity:.9}
  .opt{display:flex; gap:8px; flex-wrap:wrap}
  .chip{cursor:pointer; padding:7px 10px; border-radius:10px; border:1px solid rgba(120,160,255,.28)}
  .chip.active{ background:rgba(77,166,255,.2); border-color:rgba(77,166,255,.55)}
  /* â€œCompanionâ€ dokunuÅŸ animasyonu */
  .tap{
    position:fixed; width:10px; height:10px; border-radius:50%;
    background:#7ec3ff; box-shadow:0 0 20px #7ec3ff88, 0 0 40px #7ec3ff55; pointer-events:none; z-index:3;
    animation:pop .6s ease-out forwards;
  }
  @keyframes pop{0%{transform:scale(.6); opacity:.9} 60%{transform:scale(4); opacity:.4} 100%{transform:scale(6); opacity:0}}
</style>
</head>
<body>

  <!-- HUD -->
  <div class="hud" id="hud">
    <div class="badge">Guardian v1 ğŸ’™</div>
    <div class="sep"></div>
    <button class="btn" id="modeBtn" title="Mod deÄŸiÅŸtir">Mod: Takip</button>
    <button class="btn" id="burstBtn" title="YÄ±ldÄ±z yaÄŸmuru">YÄ±ldÄ±z YaÄŸmuru âœ¨</button>
    <button class="btn" id="panelBtn" title="Tema / Ayarlar">Ayarlar âš™ï¸</button>
  </div>
<!-- Ayar Paneli -->
  <div class="panel" id="panel">
    <h3>Tema</h3>
    <div class="opt" id="themes">
      <div class="chip active" data-theme="ocean">Ocean</div>
      <div class="chip" data-theme="neon">Neon</div>
      <div class="chip" data-theme="space">Space</div>
      <div class="chip" data-theme="sunrise">Sunrise</div>
    </div>
    <h3 style="margin-top:10px">ParlaklÄ±k</h3>
    <input id="glow" type="range" min="0" max="1" step="0.01" value="0.8" style="width:100%">
    <h3 style="margin-top:10px">Ä°z UzunluÄŸu</h3>
    <input id="trail" type="range" min="0.6" max="0.98" step="0.01" value="0.9" style="width:100%">
  </div>

  <!-- Canvas -->
  <canvas id="fx"></canvas>

  <!-- Ä°puÃ§larÄ± -->
  <div class="pill" id="tips">
    <div class="tip">ğŸ–±ï¸ Fareyi sÃ¼rÃ¼kle / ğŸ“± ParmaÄŸÄ±nÄ± gezdir â†’ <strong>Mavi Orb</strong> seni takip eder.</div>
    <div class="tip">ğŸ‘† Tek dokun â†’ cevap Â· âœŒï¸ Ä°ki parmak â†’ <strong>yÄ±ldÄ±z patlamasÄ±</strong>.</div>
    <div class="tip">ğŸ’¬ Sohbet: altta yaz â†’ <strong>GÃ¶nder</strong>.</div>
    <div class="tip">âš¡ Komutlar: <b>/mode orbit</b>, <b>/theme neon</b>, <b>/burst</b></div>
  </div>

  <!-- Sohbet AlanÄ± -->
  <div id="app">
    <div id="chat-container"></div>
    <div id="input-area">
      <input type="text" id="user-input" placeholder="MesajÄ±nÄ±z..." autocomplete="off" />
      <button id="send-btn" type="button">GÃ¶nder</button>
    </div>
  </div>

<script>
(() => {
  /* ---------- Canvas FX / Orb ---------- */
  const canvas = document.getElementById('fx');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = innerWidth;
  let H = canvas.height = innerHeight;
  
  // ---- Settings (persisted) ----
  
  const store = {
    set(k,v){ try{ localStorage.setItem('guardian:'+k, JSON.stringify(v)) }catch{} },
    get(k,def){ try{ const v=localStorage.getItem('guardian:'+k); return v?JSON.parse(v):def }catch{ return def } }
  };
  const settings = {
    mode: store.get('mode','follow'),   // 'follow' | 'orbit'
    theme: store.get('theme','ocean'),
    glow: store.get('glow',0.8),
    trail: store.get('trail',0.9)
  };

  const themes = {
    ocean:{ bg:['#0d1638','#0a1130','#070b1f','#040714'], orbCore:'#4da6ff', orbEdge:'#002255', spark:'#7ec3ff' },
    neon:{  bg:['#0f042b','#1c0739','#100423','#070318'], orbCore:'#00ffd9', orbEdge:'#003d35', spark:'#66ffe8' },
    space:{ bg:['#030714','#050a1b','#02040c','#000000'], orbCore:'#94b5ff', orbEdge:'#1b2f66', spark:'#e6f0ff' },
    sunrise:{bg:['#160b28','#2a0f3d','#311245','#16081f'], orbCore:'#ff7ad6', orbEdge:'#611a4a', spark:'#ffd2f1' }
  };
 
  function applyTheme(name){
    const t = themes[name]||themes.ocean;
    document.body.style.background =
      `radial-gradient(1200px 600px at 50% -20%, ${t.bg[0]} 0%, ${t.bg[1]} 40%, ${t.bg[2]} 70%, ${t.bg[3]} 100%)`;
    css.orbCore=t.orbCore;
    css.orbEdge=t.orbEdge;
    css.spark=t.spark;
    [...document.querySelectorAll('.chip')].forEach(c=>{
      c.classList.toggle('active', c.dataset.theme===name);
    });
    settings.theme=name; store.set('theme',name);
  }
  // HUD refs
  const modeBtn = document.getElementById('modeBtn');
  const burstBtn = document.getElementById('burstBtn');
  const panelBtn = document.getElementById('panelBtn');
  const panel = document.getElementById('panel');
  const glowRange = document.getElementById('glow');
  const trailRange = document.getElementById('trail');

  document.getElementById('themes').addEventListener('click',e=>{
    const chip = e.target.closest('.chip'); if(!chip) return;
    applyTheme(chip.dataset.theme);
  });

  panelBtn.onclick = () => { panel.style.display = panel.style.display==='none' || !panel.style.display ? 'grid':'none'; }
  glowRange.oninput = e => { settings.glow = +e.target.value; store.set('glow',settings.glow); }
  trailRange.oninput = e => { settings.trail = +e.target.value; store.set('trail',settings.trail); }

  function toggleMode(){
    settings.mode = settings.mode==='follow' ? 'orbit' : 'follow';
    modeBtn.textContent = 'Mod: ' + (settings.mode==='follow'?'Takip':'Koruma');
    store.set('mode', settings.mode);
  }
  modeBtn.onclick = toggleMode;

  // ---- Physics / Particles ----
  const css = { orbCore:'#4da6ff', orbEdge:'#002255', spark:'#7ec3ff' };
  applyTheme(settings.theme);
  glowRange.value = settings.glow;
  trailRange.value = settings.trail;
  modeBtn.textContent = 'Mod: ' + (settings.mode==='follow'?'Takip':'Koruma');

  const pointer = { x: W*0.5, y: H*0.5, active:false };
  const orb = {
    x: W*.5, y:H*.5, vx:0, vy:0, r:32,
    orbitAngle:0, orbitR:90
  };
  const sparks = [];
  const stars = makeStars(160);

  function makeStars(n){
    const arr=[];
    for(let i=0;i<n;i++){
      arr.push({
        x: Math.random()*W, y:Math.random()*H*0.9,
        z: Math.random()*0.6 + 0.4,
        a: Math.random()*Math.PI*2,
        tw: Math.random()*0.8 + 0.2
      });
    }
    return arr;
  }

  function addSparks(x,y,amount=60,spread=2.6, speed=2.8){
    for(let i=0;i<amount;i++){
      const a = Math.random()*Math.PI*2;
      const m = (Math.random()*speed)+0.4;
      sparks.push({ x,y, vx:Math.cos(a)*m, vy:Math.sin(a)*m, life:1, size: Math.random()*2+0.6 });
    }
  }

  // star shower
  function burst(){
    addSparks(orb.x, orb.y, 120, 3.2, 3.6);
    flash = 1;
  }
  burstBtn.onclick = burst;

  // Tap ripple
  function ripple(x,y){
    const el = document.createElement('div');
    el.className = 'tap'; el.style.left = (x-5)+'px'; el.style.top = (y-5)+'px';
    document.body.appendChild(el); setTimeout(()=>el.remove(),650);
  }

  // Input
  function setPointer(e){
    if(e.touches && e.touches.length){
      pointer.x = e.touches[0].clientX;
      pointer.y = e.touches[0].clientY;
      pointer.active = true;
      if(e.touches.length===2) burst();
    }else{
      pointer.x = e.clientX; pointer.y = e.clientY; pointer.active = true;
    }
  }
  addEventListener('mousemove', setPointer, {passive:true});
  addEventListener('touchstart', e=>{ setPointer(e); ripple(pointer.x,pointer.y); }, {passive:true});
  addEventListener('touchmove', setPointer, {passive:true});
  addEventListener('touchend', ()=>pointer.active=false, {passive:true});
  addEventListener('mousedown', e=>{ setPointer(e); ripple(pointer.x,pointer.y); });
  addEventListener('mouseup', ()=>pointer.active=false);

  // Resize
  addEventListener('resize', ()=>{
    W = canvas.width = innerWidth; H = canvas.height = innerHeight;
    // yÄ±ldÄ±zlarÄ± tekrar Ã¼ret, orantÄ± korunsun
    stars.splice(0, stars.length, ...makeStars(160));
  });

  // Anim loop
  let flash = 0;
  function tick(t){
    requestAnimationFrame(tick);


  // Trail motion blur
  ctx.fillStyle = `rgba(5, 8, 12, ${1-settings.trail})`;
  ctx.fillRect(0,0,W,H);
// ğŸŒŒ Galaksi yÄ±ldÄ±zlarÄ± - 3D derinlikli hareket
for (const s of stars) {
  s.a += 0.002 + (1 - s.z) * 0.002;
  s.z -= 0.0010;
  if (s.z < 0.5) {
    s.z = 1.0;    
    s.x = Math.random() * W;
    s.y = Math.random() * H;
  }

  const tw = (Math.sin(s.a * 3) * 0.5 + 0.5) * s.tw;
  const px = (s.x - W / 2) * (1 / s.z) + W / 2;
  const py = (s.y - H / 2) * (1 / s.z) + H / 2;
  const size = (1.2 + s.z * 1.4) * (1.6 - s.z);

  ctx.globalAlpha = 0.25 + tw * (1 - s.z);
  ctx.fillStyle = css.spark;
  ctx.fillRect(px, py, size, size);
}
ctx.globalAlpha = 1;

// ğŸŒ  Meteor geÃ§iÅŸleri
if (Math.random() < 0.004) { 
  const mx = Math.random() * W;
  const my = Math.random() * H * 0.6;
  const mvx = -6 - Math.random() * 3;
  const mvy = 1 + Math.random() * 2;
  sparks.push({
    x: mx, y: my, vx: mvx, vy: mvy,
    life: 1.0, size: 2.5, meteor: true
  });
}

// ğŸ”¥ MeteorlarÄ± Ã§iz
for (let i = sparks.length - 1; i >= 0; i--) {
  const p = sparks[i];
  p.x += p.vx;
  p.y += p.vy;
  p.life -= 0.01;

  if (p.life <= 0 || p.x < 0 || p.y > H) {
    sparks.splice(i, 1);
    continue;
  }

  if (p.meteor) {
    const grad = ctx.createLinearGradient(p.x, p.y, p.x - p.vx * 8, p.y - p.vy * 8);
    grad.addColorStop(0, css.spark);
    grad.addColorStop(1, 'transparent');
    ctx.globalAlpha = p.life * 0.9;
    ctx.fillStyle = grad;
    ctx.fillRect(p.x, p.y, 5, 2);
  }
}
ctx.globalAlpha = 1;

  // âš™ï¸ physics (orb hareketi)
  if(settings.mode==='follow'){
    const dx = (pointer.x||W*0.5)-orb.x;
    const dy = (pointer.y||H*0.5)-orb.y;
    orb.vx += dx*0.012; 
    orb.vy += dy*0.012;
  }else{
    const cx = (pointer.x||W*0.5), cy=(pointer.y||H*0.5);
    orb.orbitAngle += 0.03;
    const tx = cx + Math.cos(orb.orbitAngle)*orb.orbitR;
    const ty = cy + Math.sin(orb.orbitAngle)*orb.orbitR;
    orb.vx += (tx-orb.x)*0.05; 
    orb.vy += (ty-orb.y)*0.05;
  }
  orb.vx *= 0.86; 
  orb.vy *= 0.86; 
  orb.x += orb.vx; 
  orb.y += orb.vy;

    // sparks
    for(let i=sparks.length-1;i>=0;i--){
      const p=sparks[i]; p.x+=p.vx; p.y+=p.vy; p.vx*=0.985; p.vy*=0.985; p.life-=0.016;
      if(p.life<=0||p.x<0||p.x>W||p.y<0||p.y>H){sparks.splice(i,1);continue;}
      ctx.globalCompositeOperation='lighter';
      ctx.globalAlpha=p.life*settings.glow; ctx.fillStyle=css.spark;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill();
      ctx.globalCompositeOperation='source-over'; ctx.globalAlpha=1;
    }

    // orb
    const grd=ctx.createRadialGradient(orb.x-orb.r*0.3,orb.y-orb.r*0.3,2,orb.x,orb.y,orb.r*1.2);
    grd.addColorStop(0,css.orbCore); grd.addColorStop(1,css.orbEdge);
    ctx.shadowBlur=40+settings.glow*60; ctx.shadowColor=css.orbCore;
    ctx.fillStyle=grd; ctx.beginPath(); ctx.arc(orb.x,orb.y,orb.r,0,Math.PI*2); ctx.fill();
    ctx.shadowBlur=0;

    const haloR = orb.r * (1.6 + Math.sin(t / 400) * 0.06);

// --- Heartbeat Glow Effect ---
let heartPhase = Math.sin(t / 300); // kalp ritmi dalgasÄ±
let heartGlow = (heartPhase * 0.5 + 0.5) * 0.25; // 0â€“0.25 arasÄ± titreÅŸim
if (pointer.active) heartGlow += 0.20; // dokununca daha yoÄŸun parlÄ±yor

ctx.globalAlpha = 0.25 + settings.glow * 0.35 + heartGlow + flash * 0.25;
ctx.strokeStyle = css.orbCore;
ctx.lineWidth = 4;
ctx.beginPath();
ctx.arc(orb.x, orb.y, haloR, 0, Math.PI * 2);
ctx.stroke();
ctx.globalAlpha = 1;
flash *= 0.92;
  }
  requestAnimationFrame(tick);

  addEventListener('keydown',(e)=>{
    if(e.key===' '){ e.preventDefault(); toggleMode(); }
    if(e.key.toLowerCase()==='b'){ burst(); }
  });

  /* ---------- Chat (OpenAI API) ---------- */
  const chatContainer = document.getElementById('chat-container');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');
  const tips = document.getElementById('tips');

  const OPENAI_API_KEY = "YOUR_OPENAI_API_KEY_HERE";
  const API_URL = "https://api.openai.com/v1/chat/completions";

  const messages = [
    { role: "system", content: "Assistant is a helpful AI integrated into Guardian v1 interface." }
  ];

  function hideTips(){ if(tips) tips.style.display='none'; }

  function addMessage(content, sender){
    const msgDiv = document.createElement('div');
    msgDiv.className = 'bubble ' + (sender === 'user' ? 'user' : 'bot');
    msgDiv.textContent = content;
    chatContainer.appendChild(msgDiv);
    requestAnimationFrame(()=> msgDiv.classList.add('show'));
    chatContainer.scrollTop = chatContainer.scrollHeight + 9999;
  }

  async function sendMessage(){
    const text = userInput.value.trim();
    if(!text) return;
    hideTips();
    addMessage(text, 'user');
    messages.push({ role: 'user', content: text });
    userInput.value = '';
    userInput.focus();
    sendBtn.disabled = true;
    burst();
    try{
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${OPENAI_API_KEY}`
        },
        body: JSON.stringify({
          model: 'gpt-3.5-turbo',
          messages
        })
      });
      if(!response.ok){
        throw new Error(`API error: ${response.status}`);
      }
      const data = await response.json();
      const reply = data.choices?.[0]?.message?.content?.trim() || 'âš ï¸ YanÄ±t alÄ±namadÄ±.';
      addMessage(reply, 'bot');
      messages.push({ role: 'assistant', content: reply });
      flash = 1;
    }catch(err){
      console.error('Error fetching from OpenAI API:', err);
      addMessage('âš ï¸ Bir hata oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.', 'bot');
    }finally{
      sendBtn.disabled = false;
    }
  }

  sendBtn.addEventListener('click', sendMessage);
  userInput.addEventListener('keyup', e => { if(e.key === 'Enter') sendMessage(); });

  addMessage('Guardian burada ğŸ’™ Haydi mesajÄ±nÄ± yaz; ben hazÄ±rÄ±m.', 'bot');
})();
</script>
</body>
</html>
